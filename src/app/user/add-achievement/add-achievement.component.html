<div class="container">
  <h3 class="title">Add Achievement</h3>
  <form
    (ngSubmit)="submitAchievement(achievementForm.value)"
    #achievementForm="ngForm"
  >
    <mat-form-field appearance="fill" style="width: 100%">
      <mat-label>Kind</mat-label>
      <mat-select
        name="kind"
        [(value)]="achievement.kind"
        id="kind"
        required
        name="kind"
        #kind="ngModel"
        [(ngModel)]="achievement.kind"
      >
        <mat-option *ngFor="let kind of kinds" [value]="kind.value">
          {{ kind.viewValue }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill" style="width: 100%">
      <mat-label>ID</mat-label>
      <input
        matInput
        [(value)]="achievement.id"
        id="id"
        required
        name="id"
        #id="ngModel"
        [(ngModel)]="achievement.id"
      />
    </mat-form-field>

    <mat-form-field appearance="fill" style="width: 100%">
      <mat-label>Name</mat-label>
      <input
        matInput
        [(value)]="achievement.name"
        id="name"
        required
        name="name"
        #name="ngModel"
        [(ngModel)]="achievement.name"
      />
    </mat-form-field>

    <mat-form-field
      *ngIf="
        achievement.kind === 'presentation' ||
        achievement.kind === 'workshop' ||
        achievement.kind === 'keynote'
      "
      appearance="fill"
      style="width: 100%"
    >
      <mat-label>Session ID</mat-label>
      <input
        matInput
        [(value)]="achievement.session"
        id="session"
        required
        name="session"
        #session="ngModel"
        [(ngModel)]="achievement.session"
      />
    </mat-form-field>

    <button
      mat-raised-button
      color="primary"
      type="button"
      (click)="fileInput.click()"
      style="margin-bottom: 1rem"
    >
      <span>Upload Image</span>
      <input
        #fileInput
        type="file"
        (change)="uploadImage($event)"
        style="display: none"
        accept="image/*"
        id="img"
        required
        name="img"
        #img="ngModel"
        [(ngModel)]="achievement.img"
      />
    </button>
    <span *ngIf="achievement.img">
      <mat-icon style="color: green">check_circle</mat-icon>
      <p>{{ achievement.img }}</p>
    </span>

    <mat-form-field appearance="fill" style="width: 100%">
      <mat-label>Value</mat-label>
      <input
        matInput
        [(value)]="achievement.value"
        id="value"
        required
        name="value"
        #value="ngModel"
        [(ngModel)]="achievement.value"
      />
    </mat-form-field>

    <div class="row">
      <div class="col-sm-6 form-group">
        <label for="from">Validity (from)</label>
        <br />
        <mat-form-field appearance="fill" style="width: 100%">
          <mat-label>Choose a date</mat-label>
          <input
            matInput
            [matDatepicker]="from"
            [(value)]="achievement.validity.from"
            name="from"
            [(ngModel)]="achievement.validity.from"
          />
          <mat-hint>DD/MM/YYYY</mat-hint>
          <mat-datepicker-toggle
            matIconSuffix
            [for]="from"
          ></mat-datepicker-toggle>
          <mat-datepicker #from></mat-datepicker>
        </mat-form-field>
      </div>

      <div class="col-sm-6 form-group">
        <label for="to">Validity (to)</label>
        <br />
        <mat-form-field appearance="fill" style="width: 100%">
          <mat-label>Choose a date</mat-label>
          <input
            matInput
            [matDatepicker]="to"
            [(value)]="achievement.validity.to"
            name="to"
            [(ngModel)]="achievement.validity.to"
          />
          <mat-hint>DD/MM/YYYY</mat-hint>
          <mat-datepicker-toggle
            matIconSuffix
            [for]="to"
          ></mat-datepicker-toggle>
          <mat-datepicker #to></mat-datepicker>
        </mat-form-field>
      </div>
    </div>

    <mat-form-field appearance="fill" style="width: 100%">
      <mat-label>Description (optional)</mat-label>
      <input
        matInput
        [(value)]="achievement.description"
        id="description"
        name="description"
        #description="ngModel"
        [(ngModel)]="achievement.description"
      />
    </mat-form-field>

    <mat-form-field appearance="fill" style="width: 100%">
      <mat-label>Category (optional)</mat-label>
      <input
        matInput
        [(value)]="achievement.category"
        id="category"
        name="category"
        #category="ngModel"
        [(ngModel)]="achievement.category"
      />
    </mat-form-field>

    <mat-form-field appearance="fill" style="width: 100%">
      <mat-label>Instructions (optional)</mat-label>
      <input
        matInput
        [(value)]="achievement.instructions"
        id="instructions"
        name="instructions"
        #instructions="ngModel"
        [(ngModel)]="achievement.instructions"
      />
    </mat-form-field>

    <div class="center">
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="!achievementForm.form.valid"
      >
        Submit
      </button>
    </div>
  </form>
</div>
