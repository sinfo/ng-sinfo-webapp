<app-loading [content]="sessions"></app-loading>

<div class="align-center pad" *ngIf="sessions">
  <div class="row">
    <h3>
      Check in
    </h3>
  </div>

  <div *ngIf="selectedSession">
    <app-qrcode-scanner (userReadOutput)="receiveUser($event)" [camStarted]="scannerActive" [title]="title"
      [buttonLabel]="submitLabel" (buttonAction)="submit($event)" [insideScannerMsg]="insideScannerMsg">
    </app-qrcode-scanner>

    <div class="row destroy">
      <h4>Unregistered Users</h4>
      <div class='unregistered'>
        <button class='btn btn-button' (click)="updateUnregistered(-1)">-</button>
        <div class='box'>{{unregistered}}</div>
        <button class='btn btn-button' (click)="updateUnregistered(1)">+</button>
      </div>
      <button class="btn btn-button" (click)="delete()">Delete saved users</button>
    </div>

  </div>

  <div class="container align-center user" *ngIf="!selectedSession">

    <div class='slider'>
      <mat-slide-toggle [(ngModel)]="all" (change)='toggleAll()'>See all</mat-slide-toggle>
    </div>

    <div class="sessions-wrapper">
      <div *ngFor="let session of sessions" class="row session">
        <div class="col-sm-12">
          <div class="row well well-sm workshop-wrapper">
            <div class="img-wrapper col-sm-2">
              <img src="{{session.session.img}}" alt="{{session.session.name}}">
            </div>
            <div class="info-wrapper col-sm-7">
              <h4 class="name">Session: {{session.session.name}}</h4>
              <h4 class="name">Occupancy: {{session.total}}</h4>
              <div class="session-details">
                <div *ngIf="session.begin" class="padded">
                  <p>
                    <i class="fa fa-calendar"></i> {{session.begin | date:'fullDate':'+0000'}}
                  </p>
                </div>
                <div *ngIf="session.begin" class="padded">
                  <p>
                    <i class="fa fa-clock-o"></i> {{session.begin | date:'shortTime':'+0000'}} -
                    {{session.end | date:'shortTime':'+0000'}}
                  </p>
                </div>
                <div *ngIf="session.place">
                  <p>
                    <i class="fa fa-map-marker"></i> {{session.session.place}}
                  </p>
                </div>
              </div>
            </div>
            <div *ngIf='session.canCheckIn' class="col-sm-3 checkin">
              <button class="btn btn-button" (click)="beginCheckIn(session.session)">Check in</button>
            </div>
          </div>

        </div>

      </div>
    </div>

  </div>
</div>